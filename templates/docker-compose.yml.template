version: "3.7"

services:
    app:
        container_name: %project.name%-%project.type%
        stdin_open: true
        image: ubuntu2004-python38
        build:
            context: ./env/images/ubuntu2004-python38
        ports:
            - %project.port%:8000
        volumes:
            - %project.path%:/app
        networks:
            - %project.name%-net

    db:
        container_name: %project.name%-db
        stdin_open: true
        image: mariadb:latest
        ports:
            - 3336:3306
        command: >
            --character-set-server=utf8mb4
            --collation-server=utf8mb4_bin
            --innodb_file_per_table=On
            --wait-timeout=28800
        environment:
            MYSQL_ROOT_PASSWORD: "password"
            MYSQL_USER: user
            MYSQL_PASSWORD: password
            MYSQL_DATABASE: main
        networks:
            - %project.name%-net

networks:
    %project.name%-net: